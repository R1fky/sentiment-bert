<div class="container mt-4">
  <h2 class="mb-4 fw-bold">Dashboard Analisis Sentimen Berdasarkan Kategori Pertanyaan</h2>

  <!-- Blok Sentimen -->
  <div class="row mb-4">
    <div class="col-md-4">
      <div class="card text-white bg-success shadow-sm">
        <div class="card-body">
          <h5 class="card-title">Positif</h5>
          <p class="card-text fs-4"><%= summary.positif %> Jawaban</p>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card text-white bg-secondary shadow-sm">
        <div class="card-body">
          <h5 class="card-title">Netral</h5>
          <p class="card-text fs-4"><%= summary.netral %> Jawaban</p>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card text-white bg-danger shadow-sm">
        <div class="card-body">
          <h5 class="card-title">Negatif</h5>
          <p class="card-text fs-4"><%= summary.negatif %> Jawaban</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Diagram Batang -->
  <div class="card shadow-sm">
    <div class="card-body">
      <h5 class="card-title">Distribusi Sentimen per Kategori (%)</h5>
      <canvas id="sentimentChart" height="120"></canvas>
    </div>
  </div>
</div>

<!-- ChartJS -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const ctx = document.getElementById('sentimentChart').getContext('2d');
  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: <%- JSON.stringify(labels) %>,
      datasets: [
        {
          label: 'Positif',
          data: <%- JSON.stringify(positifData) %>,
          backgroundColor: 'rgba(40, 167, 69, 0.7)',
        },
        {
          label: 'Netral',
          data: <%- JSON.stringify(netralData) %>,
          backgroundColor: 'rgba(108, 117, 125, 0.7)',
        },
        {
          label: 'Negatif',
          data: <%- JSON.stringify(negatifData) %>,
          backgroundColor: 'rgba(220, 53, 69, 0.7)',
        }
      ]
    },
    options: {
      responsive: true,
      scales: {
        y: {
          beginAtZero: true,
          max: 100,
          title: {
            display: true,
            text: 'Persentase (%)'
          }
        },
        x: {
          ticks: {
            autoSkip: false,
            maxRotation: 30,
            minRotation: 15
          }
        }
      },
      plugins: {
        legend: { position: 'top' },
        tooltip: {
          callbacks: {
            label: ctx => ctx.dataset.label + ': ' + ctx.raw + '%'
          }
        }
      }
    }
  });
</script>
 