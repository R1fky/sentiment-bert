<style>
  body {
    font-family: "Segoe UI", sans-serif;
    background-color: #f9f9fb;
  }

  .page-title {
    font-size: 1.75rem;
    font-weight: 700;
    color: #212529;
  }

  .btn-custom {
    border-radius: 0.5rem;
    font-weight: 600;
    transition: all 0.3s ease;
    letter-spacing: 0.3px;
  }

  .btn-outline-info:hover {
    background-color: #0dcaf0;
    color: #fff;
    box-shadow: 0 4px 16px rgba(13, 202, 240, 0.4);
  }

  .btn-outline-warning:hover {
    background-color: #ffc107;
    color: #000;
    box-shadow: 0 4px 16px rgba(255, 193, 7, 0.4);
  }

  .table thead {
    background-color: #f0f2f5;
    font-weight: 600;
    color: #495057;
  }

  .table tbody tr:hover {
    background-color: #f8f9fa;
    transition: background-color 0.2s ease;
  }

  .dropdown-menu a:hover {
    background-color: #f1f1f1;
    font-weight: 500;
  }

  .table td,
  .table th {
    vertical-align: middle !important;
  }

  .table th {
    text-align: center;
  }

  @media (max-width: 576px) {
    .btn-custom {
      width: 100%;
      margin-bottom: 0.5rem;
    }
  }

  .table-container {
    border-radius: 1rem;
    overflow: hidden;
    box-shadow: 0 6px 24px rgba(0, 0, 0, 0.05);
    background: white;
  }
</style>

<div class="container mt-5">
  <!-- Header -->
  <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center mb-4">
    <h3 class="page-title mb-3 mb-md-0">üìù Question Page</h3>

    <div class="d-flex flex-column flex-sm-row align-items-stretch gap-2">
      <!-- Filter Button -->
      <div class="dropdown">
        <button class="btn btn-outline-info btn-custom dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-filter-square"></i> Filter</button>
        <ul class="dropdown-menu shadow-sm" aria-labelledby="dropdownMenuButton">
          <% questions_category.forEach(category => { %>
          <li>
            <a class="dropdown-item" href="/question/filter/<%= encodeURIComponent(category.question_category) %>"> <%= category.question_category %> </a>
          </li>
          <% }) %>
          <li><hr class="dropdown-divider" /></li>
          <li><a class="dropdown-item" href="#">Proses Pembelajaran</a></li>
          <li><a class="dropdown-item" href="#">Fasilitas Pembelajaran</a></li>
        </ul>
      </div>

      <!-- Add Button -->
      <a href="/question/add-question" class="btn btn-outline-warning btn-custom"> <i class="bi bi-plus-circle"></i> Add Question </a>
    </div>
  </div>

  <!-- Table -->
  <div class="table-responsive table-container">
    <table class="table table-hover table-bordered align-middle mb-0">
      <thead class="text-center">
        <tr>
          <th scope="col">No</th>
          <th scope="col" class="text-start ps-4">Question</th>
          <th scope="col">Action</th>
        </tr>
      </thead>
      <tbody>
        <% questions.forEach((question, index) => { %>
        <tr>
          <th scope="row" class="text-center"><%= index + 1 %></th>
          <td class="ps-4"><%= question.question_text %></td>
          <td class="text-center">
            <a href="/edit/<%= question.id %>" class="btn btn-sm btn-primary me-2" title="Edit">
              <i class="bi bi-pencil-square"></i>
            </a>
            <a href="/delete/<%= question.id %>" class="btn btn-sm btn-danger" title="Delete">
              <i class="bi bi-folder-x"></i>
            </a>
          </td>
        </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
</div>

<script>
  const isLogin = localStorage.getItem("user");
  window.token = localStorage.getItem("token");

  if (!isLogin || !window.token) {
    window.location.href = "/";
  }
</script>
